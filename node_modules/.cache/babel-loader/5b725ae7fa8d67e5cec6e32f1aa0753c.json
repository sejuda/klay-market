{"ast":null,"code":"/*\n    Copyright 2021 The caver-js Authors\n    This file is part of the caver-js library.\n\n    The caver-js library is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    The caver-js library is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\n*/\nconst _ = require('lodash');\n\nconst BigNumber = require('bignumber.js');\n\nconst Contract = require('../../caver-contract');\n\nconst {\n  kip37JsonInterface,\n  kip37ByteCode,\n  determineSendParams,\n  formatParamForUint256,\n  validateDeployParameterForKIP37,\n  interfaceIds\n} = require('./kctHelper');\n\nconst {\n  isAddress,\n  toBuffer,\n  isHexStrict,\n  toHex,\n  stripHexPrefix,\n  leftPad\n} = require('../../caver-utils');\n\nconst KIP13 = require('../src/kip13');\n\nclass KIP37 extends Contract {\n  /**\n   * Creates an instance of KIP37.\n   * @method create\n   * @param {string} tokenAddress - The KIP-73 token contract address.\n   * @param {Array} [abi] - The Contract Application Binary Interface (ABI) of the KIP-37.\n   * @return {object}\n   */\n  static create(tokenAddress, abi) {\n    return new KIP37(tokenAddress, abi);\n  }\n  /**\n   * deploy deploys a KIP-37 token contract to Klaytn network.\n   * `const deployedContract = await caver.kct.kip37.deploy({\n   *      uri: ''\n   *  }, '0x{address in hex}')`\n   *\n   * @method deploy\n   * @param {Object} tokenInfo The object that defines the uri to deploy.\n   * @param {Object|String} sendOptions The address of the account to deploy the KIP-37 token contract or an object holding parameters that are required for sending a transaction.\n   * @param {IWallet} [wallet] The wallet instance to sign and send a transaction.\n   * @return {Object}\n   */\n\n\n  static deploy(tokenInfo, sendOptions, wallet) {\n    validateDeployParameterForKIP37(tokenInfo);\n    const {\n      uri\n    } = tokenInfo;\n    const kip37 = new KIP37();\n    if (wallet !== undefined) kip37.setWallet(wallet); // If sendOptions is string type, sendOptions means deployer's address\n\n    if (_.isString(sendOptions)) sendOptions = {\n      from: sendOptions,\n      gas: 7000000,\n      value: 0\n    };\n    sendOptions.gas = sendOptions.gas !== undefined ? sendOptions.gas : 7000000;\n    return kip37.deploy({\n      data: kip37ByteCode,\n      arguments: [uri]\n    }).send(sendOptions);\n  }\n  /**\n   * detectInterface detects which interface the KIP-37 token contract supports.\n   *\n   * @method detectInterface\n   * @param {string} contractAddress The address of the KIP-37 token contract to detect.\n   * @return {object}\n   */\n\n\n  static detectInterface(contractAddress) {\n    const kip37 = new KIP37(contractAddress);\n    return kip37.detectInterface();\n  }\n\n  constructor(tokenAddress, abi = kip37JsonInterface) {\n    if (tokenAddress) {\n      if (_.isString(tokenAddress)) {\n        if (!isAddress(tokenAddress)) throw new Error(`Invalid token address ${tokenAddress}`);\n      } else {\n        abi = tokenAddress;\n        tokenAddress = undefined;\n      }\n    }\n\n    super(abi, tokenAddress);\n    this.setWallet(KIP37.wallet);\n  }\n\n  clone(tokenAddress = this.options.address) {\n    const cloned = new this.constructor(tokenAddress, this.options.jsonInterface);\n    cloned.setWallet(this._wallet);\n    return cloned;\n  }\n  /**\n   * detectInterface detects which interface the KIP-37 token contract supports.\n   *\n   * @method detectInterface\n   * @return {object}\n   */\n\n\n  async detectInterface() {\n    const detected = {\n      IKIP37: false,\n      IKIP37Metadata: false,\n      IKIP37Mintable: false,\n      IKIP37Burnable: false,\n      IKIP37Pausable: false\n    };\n    const notSupportedMsg = `This contract does not support KIP-13.`;\n    const contractAddress = this._address;\n\n    try {\n      const isSupported = await KIP13.isImplementedKIP13Interface(contractAddress);\n      if (isSupported !== true) throw new Error(notSupportedMsg); // Since there is an extension that has the same interface id even though it is a different KCT,\n      // it must be checked first whether the contract is a KIP-37 contract.\n\n      detected.IKIP37 = await this.supportsInterface(interfaceIds.kip37.IKIP37);\n      if (detected.IKIP37 === false) return detected;\n      await Promise.all(Object.keys(interfaceIds.kip37).map(async interfaceName => {\n        if (interfaceIds.kip37[interfaceName] !== interfaceIds.kip37.IKIP37) detected[interfaceName] = await this.supportsInterface(interfaceIds.kip37[interfaceName]);\n      }));\n      return detected;\n    } catch (e) {\n      throw new Error(notSupportedMsg);\n    }\n  }\n  /**\n   * supportsInterface checks whether interface is supported or not.\n   *\n   * @method supportsInterface\n   * @param {string} interfaceId The interface id to check.\n   * @return {boolean}\n   */\n\n\n  async supportsInterface(interfaceId) {\n    const isSupported = await this.methods.supportsInterface(interfaceId).call();\n    return isSupported;\n  }\n  /**\n   * uri returns distinct Uniform Resource Identifier (URI) for a given token.\n   * If the string {id} exists in any URI, this function will replace this with the actual token ID in hexadecimal form.\n   * Please refer to http://kips.klaytn.com/KIPs/kip-37#metadata\n   *\n   * @method uri\n   * @param {BigNumber|string|number} id The token id to get uri.\n   * @return {string}\n   */\n\n\n  async uri(id) {\n    let uri = await this.methods.uri(formatParamForUint256(id)).call(); // Replace {id} to token id in hexadecimal form.\n\n    if (uri.includes('{id}')) {\n      let tokenIdInHex = stripHexPrefix(toHex(id));\n      tokenIdInHex = leftPad(tokenIdInHex, 64, '0');\n      uri = uri.replace('{id}', tokenIdInHex);\n    }\n\n    return uri;\n  }\n  /**\n   * totalSupply returns the total supply of the specific token.\n   *\n   * @param {BigNumber|string|number} id The token id to see the total supply.\n   * @method totalSupply\n   * @return {BigNumber}\n   */\n\n\n  async totalSupply(id) {\n    const totalSupply = await this.methods.totalSupply(formatParamForUint256(id)).call();\n    return new BigNumber(totalSupply);\n  }\n  /**\n   * balanceOf returns the balance of the account.\n   *\n   * @method balanceOf\n   * @param {string} account The address of the account for which you want to see balance.\n   * @param {BigNumber|string|number} id The token id to see balance.\n   * @return {BigNumber}\n   */\n\n\n  async balanceOf(account, id) {\n    const balance = await this.methods.balanceOf(account, formatParamForUint256(id)).call();\n    return new BigNumber(balance);\n  }\n  /**\n   * Batch returns the balance of multiple account/token pairs. `accounts` and `ids` must have the same length.\n   *\n   * @method balanceOfBatch\n   * @param {Array.<string>} accounts The address of the accounts for which you want to see balance.\n   * @param {Array.<BigNumber|string|number>} ids An array of ids of token you want to see balance.\n   * @return {BigNumber}\n   */\n\n\n  async balanceOfBatch(accounts, ids) {\n    if (ids.length !== accounts.length) throw new Error(`ids and accounts must have the same length.`);\n    const formattedTokenIds = [];\n\n    for (let i = 0; i < ids.length; i++) {\n      formattedTokenIds.push(formatParamForUint256(ids[i]));\n    }\n\n    const balances = await this.methods.balanceOfBatch(accounts, formattedTokenIds).call();\n    const ret = [];\n\n    for (const bal of balances) {\n      ret.push(new BigNumber(bal));\n    }\n\n    return ret;\n  }\n  /**\n   * isApprovedForAll returns true if an operator is approved by a given owner.\n   *\n   * @method isApprovedForAll\n   * @param {string} owner The address of the owner.\n   * @param {string} operator The address of the operator.\n   * @return {boolean}\n   */\n\n\n  async isApprovedForAll(owner, operator) {\n    const isApprovedForAll = await this.methods.isApprovedForAll(owner, operator).call();\n    return isApprovedForAll;\n  }\n  /**\n   * paused returns whether or not the token contract's transaction (or specific token) is paused.\n   * If id is not defined, checks whether the token contract's transaction is paused.\n   * If id is defined, checks whether the specific token is paused.\n   *\n   * @param {BigNumber|string|number} [id] The id of token to check wether paused or not.\n   * @method paused\n   * @return {boolean}\n   */\n\n\n  async paused(id) {\n    const callObject = id !== undefined ? this.methods.paused(formatParamForUint256(id)) : this.methods.paused();\n    const isPaused = await callObject.call();\n    return isPaused;\n  }\n  /**\n   * isPauser returns whether the account is pauser or not.\n   *\n   * @method isPauser\n   * @param {string} account The address of the account you want to check pauser or not.\n   * @return {boolean}\n   */\n\n\n  async isPauser(account) {\n    const isPauser = await this.methods.isPauser(account).call();\n    return isPauser;\n  }\n  /**\n   * isMinter returns whether the account is minter or not.\n   *\n   * @method isMinter\n   * @param {string} account The address of the account you want to check minter or not.\n   * @return {boolean}\n   */\n\n\n  async isMinter(account) {\n    const isMinter = await this.methods.isMinter(account).call();\n    return isMinter;\n  }\n  /**\n   * create creates token and assigns them to account, increasing the total supply.\n   *\n   * @method mint\n   * @param {BigNumber|string|number} id The id of token to mint.\n   * @param {BigNumber|string|number} initialSupply The amount of tokens being minted.\n   * @param {string} [uri] The token URI of the created token.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async create(id, initialSupply, uri, sendParam = {}) {\n    if (uri && _.isObject(uri)) {\n      if (uri.gas !== undefined || uri.from !== undefined) {\n        if (Object.keys(sendParam).length > 0) throw new Error(`Invalid parameters`);\n        sendParam = uri;\n        uri = '';\n      }\n    }\n\n    const executableObj = this.methods.create(formatParamForUint256(id), formatParamForUint256(initialSupply), uri);\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * setApprovalForAll enables or disables approval for a third party (\"operator\") to manage all of the caller's tokens.\n   * An operator is allowed to transfer all tokens of the sender on their behalf.\n   *\n   * @method setApprovalForAll\n   * @param {string} operator The address to add to the set of authorized operators.\n   * @param {boolean} approved True if the operator is approved, false to revoke approval.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async setApprovalForAll(operator, approved, sendParam = {}) {\n    const executableObj = this.methods.setApprovalForAll(operator, approved);\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * safeTransferFrom safely transfers the ownership of a given token id to another address.\n   *\n   * @method safeTransferFrom\n   * @param {string} from The address of the owner or approved of the given token.\n   * @param {string} to The address of the account to receive the token.\n   * @param {BigNumber|string|number} id The id of token you want to transfer.\n   * @param {BigNumber|string|number} amount The amount of tokens you want to transfer.\n   * @param {Buffer|string|number} [data] (optional) The data to send along with the call.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async safeTransferFrom(from, to, id, amount, data, sendParam = {}) {\n    if (data && _.isObject(data)) {\n      if (data.gas !== undefined || data.from !== undefined) {\n        if (Object.keys(sendParam).length > 0) throw new Error(`Invalid parameters`);\n        sendParam = data;\n        data = Buffer.from('');\n      }\n    }\n\n    if (data && !_.isBuffer(data)) {\n      if (_.isString(data) && !isHexStrict(data)) data = toHex(data);\n      data = toBuffer(data);\n    }\n\n    const executableObj = this.methods.safeTransferFrom(from, to, formatParamForUint256(id), formatParamForUint256(amount), data);\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * safeBatchTransferFrom safely transfers the ownership of given token ids to another address.\n   *\n   * @method safeBatchTransferFrom\n   * @param {string} from The address of the owner or approved of the given token.\n   * @param {string} to The address of the account to receive the token.\n   * @param {Array.<BigNumber|string|number>} ids An array of ids of token you want to transfer.\n   * @param {Array.<BigNumber|string|number>} amounts An array of amount of tokens you want to transfer.\n   * @param {Buffer|string|number} [data] (optional) The data to send along with the call.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async safeBatchTransferFrom(from, to, ids, amounts, data, sendParam = {}) {\n    if (data && _.isObject(data)) {\n      if (data.gas !== undefined || data.from !== undefined) {\n        if (Object.keys(sendParam).length > 0) throw new Error(`Invalid parameters`);\n        sendParam = data;\n        data = Buffer.from('');\n      }\n    }\n\n    if (data && !_.isBuffer(data)) {\n      if (_.isString(data) && !isHexStrict(data)) data = toHex(data);\n      data = toBuffer(data);\n    }\n\n    if (ids.length !== amounts.length) throw new Error(`ids and amounts must have the same length.`);\n    const formattedTokenIds = [];\n    const formattedTokenAmounts = [];\n\n    for (let i = 0; i < ids.length; i++) {\n      formattedTokenIds.push(formatParamForUint256(ids[i]));\n      formattedTokenAmounts.push(formatParamForUint256(amounts[i]));\n    }\n\n    const executableObj = this.methods.safeBatchTransferFrom(from, to, formattedTokenIds, formattedTokenAmounts, data);\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * mint mints tokens of the specific token type `id` and assigns the tokens according to the variables `to` and `value`.\n   *\n   * @method mint\n   * @param {string|Array.<string>} toList The address that will receive the minted tokens. If there are multiple to accounts, the values mapped to each to must also be an array.\n   * @param {BigNumber|string|number} id The id of token to mint.\n   * @param {BigNumber|string|number|Array.<BigNumber|string|number>} values The quantity of tokens being minted.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async mint(toList, id, values, sendParam = {}) {\n    if (_.isArray(toList) !== _.isArray(values)) throw new Error(`If you want to minting a specific token to multiple accounts, both toList and values both must be arrays.`);\n    let executableObj;\n\n    if (_.isArray(toList)) {\n      if (toList.length !== values.length) throw new Error(`toList and values must have the same length.`);\n      const formattedTokenValues = [];\n\n      for (const val of values) {\n        formattedTokenValues.push(formatParamForUint256(val));\n      }\n\n      executableObj = this.methods.mint(formatParamForUint256(id), toList, formattedTokenValues);\n    } else {\n      executableObj = this.methods.mint(formatParamForUint256(id), toList, formatParamForUint256(values));\n    }\n\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * mintBatch mints multiple KIP-37 tokens of the specific token types `ids` in a batch and assigns the tokens according to the variables `to` and `values`.\n   *\n   * @method mintBatch\n   * @param {string} to The address that will receive the minted tokens.\n   * @param {Array.<BigNumber|string|number>} ids The list of the token ids to mint.\n   * @param {Array.<BigNumber|string|number>} values The list of the token amounts to mint.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async mintBatch(to, ids, values, sendParam = {}) {\n    if (ids.length !== values.length) throw new Error(`ids and values must have the same length.`);\n    const formattedTokenIds = [];\n    const formattedTokenValues = [];\n\n    for (let i = 0; i < ids.length; i++) {\n      formattedTokenIds.push(formatParamForUint256(ids[i]));\n      formattedTokenValues.push(formatParamForUint256(values[i]));\n    }\n\n    const executableObj = this.methods.mintBatch(to, formattedTokenIds, formattedTokenValues);\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * addMinter adds an account as a minter that has the permission of MinterRole and can mint.\n   * The account sending transaction to execute the addMinter must be a Minter with a MinterRole.\n   *\n   * @method addMinter\n   * @param {string} account The address of account to add as minter.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async addMinter(account, sendParam = {}) {\n    const executableObj = this.methods.addMinter(account);\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * renounceMinter renounces privilege of MinterRole.\n   * The account sending transaction to execute the renounceMinter must be a Minter with a MinterRole.\n   *\n   * @method renounceMinter\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async renounceMinter(sendParam = {}) {\n    const executableObj = this.methods.renounceMinter();\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * burn destroys specific KIP37 tokens.\n   *\n   * @method burn\n   * @param {string} account The account that owns tokens.\n   * @param {BigNumber|string|number} id The token id to burn.\n   * @param {BigNumber|string|number} value The token amount to burn.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-7 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-7 abi.\n   */\n\n\n  async burn(account, id, value, sendParam = {}) {\n    const executableObj = this.methods.burn(account, formatParamForUint256(id), formatParamForUint256(value));\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * burnBatch burns multiple KIP37 tokens.\n   *\n   * @method burnBatch\n   * @param {string} account The account that owns tokens.\n   * @param {Array.<BigNumber|string|number>} ids The list of the token ids to burn.\n   * @param {Array.<BigNumber|string|number>} values The list of the token amounts to burn.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async burnBatch(account, ids, values, sendParam = {}) {\n    if (ids.length !== values.length) throw new Error(`ids and values must have the same length.`);\n    const formattedTokenIds = [];\n    const formattedTokenValues = [];\n\n    for (let i = 0; i < ids.length; i++) {\n      formattedTokenIds.push(formatParamForUint256(ids[i]));\n      formattedTokenValues.push(formatParamForUint256(values[i]));\n    }\n\n    const executableObj = this.methods.burnBatch(account, formattedTokenIds, formattedTokenValues);\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * pause pauses actions related to transfer and approval.\n   * If id is not defined, pauses the token contract.\n   * If id is defined, pauses the specific token.\n   * The account sending transaction to execute the pause must be a Pauser with a PauserRole.\n   *\n   * @method pause\n   * @param {BigNumber|string|number} [id] The id of token to pause.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async pause(id, sendParam = {}) {\n    if (Object.keys(sendParam).length === 0 && _.isObject(id)) {\n      sendParam = id;\n      id = undefined;\n    }\n\n    const executableObj = id !== undefined ? this.methods.pause(formatParamForUint256(id)) : this.methods.pause();\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * unpause resumes from the paused state.\n   * If id is not defined, unpauses the token contract.\n   * If id is defined, unpauses the specific token.\n   * The account sending transaction to execute the unpause must be a Pauser with a PauserRole.\n   *\n   * @method unpause\n   * @param {BigNumber|string|number} [id] The id of token to unpause.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async unpause(id, sendParam = {}) {\n    if (Object.keys(sendParam).length === 0 && _.isObject(id)) {\n      sendParam = id;\n      id = undefined;\n    }\n\n    const executableObj = id !== undefined ? this.methods.unpause(formatParamForUint256(id)) : this.methods.unpause();\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * addPauser adds an account as a pauser that has the permission of PauserRole and can pause.\n   * The account sending transaction to execute the addPauser must be a Pauser with a PauserRole.\n   *\n   * @method addPauser\n   * @param {string} account The address of account to add as pauser.\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async addPauser(account, sendParam = {}) {\n    const executableObj = this.methods.addPauser(account);\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n  /**\n   * renouncePauser renounces privilege of PauserRole.\n   * The account sending transaction to execute the renouncePauser must be a Pauser with a PauserRole.\n   *\n   * @method renouncePauser\n   * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n   * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n   *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n   */\n\n\n  async renouncePauser(sendParam = {}) {\n    const executableObj = this.methods.renouncePauser();\n    sendParam = await determineSendParams(executableObj, sendParam, this.options);\n    return executableObj.send(sendParam);\n  }\n\n}\n\nKIP37.byteCode = kip37ByteCode;\nmodule.exports = KIP37;","map":{"version":3,"sources":["/Users/mac/Desktop/klay-market/node_modules/caver-js/packages/caver-kct/src/kip37.js"],"names":["_","require","BigNumber","Contract","kip37JsonInterface","kip37ByteCode","determineSendParams","formatParamForUint256","validateDeployParameterForKIP37","interfaceIds","isAddress","toBuffer","isHexStrict","toHex","stripHexPrefix","leftPad","KIP13","KIP37","create","tokenAddress","abi","deploy","tokenInfo","sendOptions","wallet","uri","kip37","undefined","setWallet","isString","from","gas","value","data","arguments","send","detectInterface","contractAddress","constructor","Error","clone","options","address","cloned","jsonInterface","_wallet","detected","IKIP37","IKIP37Metadata","IKIP37Mintable","IKIP37Burnable","IKIP37Pausable","notSupportedMsg","_address","isSupported","isImplementedKIP13Interface","supportsInterface","Promise","all","Object","keys","map","interfaceName","e","interfaceId","methods","call","id","includes","tokenIdInHex","replace","totalSupply","balanceOf","account","balance","balanceOfBatch","accounts","ids","length","formattedTokenIds","i","push","balances","ret","bal","isApprovedForAll","owner","operator","paused","callObject","isPaused","isPauser","isMinter","initialSupply","sendParam","isObject","executableObj","setApprovalForAll","approved","safeTransferFrom","to","amount","Buffer","isBuffer","safeBatchTransferFrom","amounts","formattedTokenAmounts","mint","toList","values","isArray","formattedTokenValues","val","mintBatch","addMinter","renounceMinter","burn","burnBatch","pause","unpause","addPauser","renouncePauser","byteCode","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAjB;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,cAAD,CAAzB;;AAEA,MAAME,QAAQ,GAAGF,OAAO,CAAC,sBAAD,CAAxB;;AACA,MAAM;AACFG,EAAAA,kBADE;AAEFC,EAAAA,aAFE;AAGFC,EAAAA,mBAHE;AAIFC,EAAAA,qBAJE;AAKFC,EAAAA,+BALE;AAMFC,EAAAA;AANE,IAOFR,OAAO,CAAC,aAAD,CAPX;;AAQA,MAAM;AAAES,EAAAA,SAAF;AAAaC,EAAAA,QAAb;AAAuBC,EAAAA,WAAvB;AAAoCC,EAAAA,KAApC;AAA2CC,EAAAA,cAA3C;AAA2DC,EAAAA;AAA3D,IAAuEd,OAAO,CAAC,mBAAD,CAApF;;AACA,MAAMe,KAAK,GAAGf,OAAO,CAAC,cAAD,CAArB;;AAEA,MAAMgB,KAAN,SAAoBd,QAApB,CAA6B;AACzB;AACJ;AACA;AACA;AACA;AACA;AACA;AACiB,SAANe,MAAM,CAACC,YAAD,EAAeC,GAAf,EAAoB;AAC7B,WAAO,IAAIH,KAAJ,CAAUE,YAAV,EAAwBC,GAAxB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACiB,SAANC,MAAM,CAACC,SAAD,EAAYC,WAAZ,EAAyBC,MAAzB,EAAiC;AAC1ChB,IAAAA,+BAA+B,CAACc,SAAD,CAA/B;AAEA,UAAM;AAAEG,MAAAA;AAAF,QAAUH,SAAhB;AACA,UAAMI,KAAK,GAAG,IAAIT,KAAJ,EAAd;AACA,QAAIO,MAAM,KAAKG,SAAf,EAA0BD,KAAK,CAACE,SAAN,CAAgBJ,MAAhB,EALgB,CAO1C;;AACA,QAAIxB,CAAC,CAAC6B,QAAF,CAAWN,WAAX,CAAJ,EAA6BA,WAAW,GAAG;AAAEO,MAAAA,IAAI,EAAEP,WAAR;AAAqBQ,MAAAA,GAAG,EAAE,OAA1B;AAAmCC,MAAAA,KAAK,EAAE;AAA1C,KAAd;AAC7BT,IAAAA,WAAW,CAACQ,GAAZ,GAAkBR,WAAW,CAACQ,GAAZ,KAAoBJ,SAApB,GAAgCJ,WAAW,CAACQ,GAA5C,GAAkD,OAApE;AAEA,WAAOL,KAAK,CACPL,MADE,CACK;AACJY,MAAAA,IAAI,EAAE5B,aADF;AAEJ6B,MAAAA,SAAS,EAAE,CAACT,GAAD;AAFP,KADL,EAKFU,IALE,CAKGZ,WALH,CAAP;AAMH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAC0B,SAAfa,eAAe,CAACC,eAAD,EAAkB;AACpC,UAAMX,KAAK,GAAG,IAAIT,KAAJ,CAAUoB,eAAV,CAAd;AACA,WAAOX,KAAK,CAACU,eAAN,EAAP;AACH;;AAEDE,EAAAA,WAAW,CAACnB,YAAD,EAAeC,GAAG,GAAGhB,kBAArB,EAAyC;AAChD,QAAIe,YAAJ,EAAkB;AACd,UAAInB,CAAC,CAAC6B,QAAF,CAAWV,YAAX,CAAJ,EAA8B;AAC1B,YAAI,CAACT,SAAS,CAACS,YAAD,CAAd,EAA8B,MAAM,IAAIoB,KAAJ,CAAW,yBAAwBpB,YAAa,EAAhD,CAAN;AACjC,OAFD,MAEO;AACHC,QAAAA,GAAG,GAAGD,YAAN;AACAA,QAAAA,YAAY,GAAGQ,SAAf;AACH;AACJ;;AACD,UAAMP,GAAN,EAAWD,YAAX;AACA,SAAKS,SAAL,CAAeX,KAAK,CAACO,MAArB;AACH;;AAEDgB,EAAAA,KAAK,CAACrB,YAAY,GAAG,KAAKsB,OAAL,CAAaC,OAA7B,EAAsC;AACvC,UAAMC,MAAM,GAAG,IAAI,KAAKL,WAAT,CAAqBnB,YAArB,EAAmC,KAAKsB,OAAL,CAAaG,aAAhD,CAAf;AACAD,IAAAA,MAAM,CAACf,SAAP,CAAiB,KAAKiB,OAAtB;AACA,WAAOF,MAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACyB,QAAfP,eAAe,GAAG;AACpB,UAAMU,QAAQ,GAAG;AACbC,MAAAA,MAAM,EAAE,KADK;AAEbC,MAAAA,cAAc,EAAE,KAFH;AAGbC,MAAAA,cAAc,EAAE,KAHH;AAIbC,MAAAA,cAAc,EAAE,KAJH;AAKbC,MAAAA,cAAc,EAAE;AALH,KAAjB;AAQA,UAAMC,eAAe,GAAI,wCAAzB;AACA,UAAMf,eAAe,GAAG,KAAKgB,QAA7B;;AAEA,QAAI;AACA,YAAMC,WAAW,GAAG,MAAMtC,KAAK,CAACuC,2BAAN,CAAkClB,eAAlC,CAA1B;AACA,UAAIiB,WAAW,KAAK,IAApB,EAA0B,MAAM,IAAIf,KAAJ,CAAUa,eAAV,CAAN,CAF1B,CAIA;AACA;;AACAN,MAAAA,QAAQ,CAACC,MAAT,GAAkB,MAAM,KAAKS,iBAAL,CAAuB/C,YAAY,CAACiB,KAAb,CAAmBqB,MAA1C,CAAxB;AACA,UAAID,QAAQ,CAACC,MAAT,KAAoB,KAAxB,EAA+B,OAAOD,QAAP;AAE/B,YAAMW,OAAO,CAACC,GAAR,CACFC,MAAM,CAACC,IAAP,CAAYnD,YAAY,CAACiB,KAAzB,EAAgCmC,GAAhC,CAAoC,MAAMC,aAAN,IAAuB;AACvD,YAAIrD,YAAY,CAACiB,KAAb,CAAmBoC,aAAnB,MAAsCrD,YAAY,CAACiB,KAAb,CAAmBqB,MAA7D,EACID,QAAQ,CAACgB,aAAD,CAAR,GAA0B,MAAM,KAAKN,iBAAL,CAAuB/C,YAAY,CAACiB,KAAb,CAAmBoC,aAAnB,CAAvB,CAAhC;AACP,OAHD,CADE,CAAN;AAMA,aAAOhB,QAAP;AACH,KAhBD,CAgBE,OAAOiB,CAAP,EAAU;AACR,YAAM,IAAIxB,KAAJ,CAAUa,eAAV,CAAN;AACH;AACJ;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAC2B,QAAjBI,iBAAiB,CAACQ,WAAD,EAAc;AACjC,UAAMV,WAAW,GAAG,MAAM,KAAKW,OAAL,CAAaT,iBAAb,CAA+BQ,WAA/B,EAA4CE,IAA5C,EAA1B;AACA,WAAOZ,WAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACa,QAAH7B,GAAG,CAAC0C,EAAD,EAAK;AACV,QAAI1C,GAAG,GAAG,MAAM,KAAKwC,OAAL,CAAaxC,GAAb,CAAiBlB,qBAAqB,CAAC4D,EAAD,CAAtC,EAA4CD,IAA5C,EAAhB,CADU,CAGV;;AACA,QAAIzC,GAAG,CAAC2C,QAAJ,CAAa,MAAb,CAAJ,EAA0B;AACtB,UAAIC,YAAY,GAAGvD,cAAc,CAACD,KAAK,CAACsD,EAAD,CAAN,CAAjC;AACAE,MAAAA,YAAY,GAAGtD,OAAO,CAACsD,YAAD,EAAe,EAAf,EAAmB,GAAnB,CAAtB;AACA5C,MAAAA,GAAG,GAAGA,GAAG,CAAC6C,OAAJ,CAAY,MAAZ,EAAoBD,YAApB,CAAN;AACH;;AACD,WAAO5C,GAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACqB,QAAX8C,WAAW,CAACJ,EAAD,EAAK;AAClB,UAAMI,WAAW,GAAG,MAAM,KAAKN,OAAL,CAAaM,WAAb,CAAyBhE,qBAAqB,CAAC4D,EAAD,CAA9C,EAAoDD,IAApD,EAA1B;AACA,WAAO,IAAIhE,SAAJ,CAAcqE,WAAd,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACmB,QAATC,SAAS,CAACC,OAAD,EAAUN,EAAV,EAAc;AACzB,UAAMO,OAAO,GAAG,MAAM,KAAKT,OAAL,CAAaO,SAAb,CAAuBC,OAAvB,EAAgClE,qBAAqB,CAAC4D,EAAD,CAArD,EAA2DD,IAA3D,EAAtB;AACA,WAAO,IAAIhE,SAAJ,CAAcwE,OAAd,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACwB,QAAdC,cAAc,CAACC,QAAD,EAAWC,GAAX,EAAgB;AAChC,QAAIA,GAAG,CAACC,MAAJ,KAAeF,QAAQ,CAACE,MAA5B,EAAoC,MAAM,IAAIvC,KAAJ,CAAW,6CAAX,CAAN;AAEpC,UAAMwC,iBAAiB,GAAG,EAA1B;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACC,MAAxB,EAAgCE,CAAC,EAAjC,EAAqC;AACjCD,MAAAA,iBAAiB,CAACE,IAAlB,CAAuB1E,qBAAqB,CAACsE,GAAG,CAACG,CAAD,CAAJ,CAA5C;AACH;;AAED,UAAME,QAAQ,GAAG,MAAM,KAAKjB,OAAL,CAAaU,cAAb,CAA4BC,QAA5B,EAAsCG,iBAAtC,EAAyDb,IAAzD,EAAvB;AAEA,UAAMiB,GAAG,GAAG,EAAZ;;AACA,SAAK,MAAMC,GAAX,IAAkBF,QAAlB,EAA4B;AACxBC,MAAAA,GAAG,CAACF,IAAJ,CAAS,IAAI/E,SAAJ,CAAckF,GAAd,CAAT;AACH;;AAED,WAAOD,GAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AAC0B,QAAhBE,gBAAgB,CAACC,KAAD,EAAQC,QAAR,EAAkB;AACpC,UAAMF,gBAAgB,GAAG,MAAM,KAAKpB,OAAL,CAAaoB,gBAAb,CAA8BC,KAA9B,EAAqCC,QAArC,EAA+CrB,IAA/C,EAA/B;AACA,WAAOmB,gBAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACgB,QAANG,MAAM,CAACrB,EAAD,EAAK;AACb,UAAMsB,UAAU,GAAGtB,EAAE,KAAKxC,SAAP,GAAmB,KAAKsC,OAAL,CAAauB,MAAb,CAAoBjF,qBAAqB,CAAC4D,EAAD,CAAzC,CAAnB,GAAoE,KAAKF,OAAL,CAAauB,MAAb,EAAvF;AACA,UAAME,QAAQ,GAAG,MAAMD,UAAU,CAACvB,IAAX,EAAvB;AACA,WAAOwB,QAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACkB,QAARC,QAAQ,CAAClB,OAAD,EAAU;AACpB,UAAMkB,QAAQ,GAAG,MAAM,KAAK1B,OAAL,CAAa0B,QAAb,CAAsBlB,OAAtB,EAA+BP,IAA/B,EAAvB;AACA,WAAOyB,QAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACkB,QAARC,QAAQ,CAACnB,OAAD,EAAU;AACpB,UAAMmB,QAAQ,GAAG,MAAM,KAAK3B,OAAL,CAAa2B,QAAb,CAAsBnB,OAAtB,EAA+BP,IAA/B,EAAvB;AACA,WAAO0B,QAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACgB,QAAN1E,MAAM,CAACiD,EAAD,EAAK0B,aAAL,EAAoBpE,GAApB,EAAyBqE,SAAS,GAAG,EAArC,EAAyC;AACjD,QAAIrE,GAAG,IAAIzB,CAAC,CAAC+F,QAAF,CAAWtE,GAAX,CAAX,EAA4B;AACxB,UAAIA,GAAG,CAACM,GAAJ,KAAYJ,SAAZ,IAAyBF,GAAG,CAACK,IAAJ,KAAaH,SAA1C,EAAqD;AACjD,YAAIgC,MAAM,CAACC,IAAP,CAAYkC,SAAZ,EAAuBhB,MAAvB,GAAgC,CAApC,EAAuC,MAAM,IAAIvC,KAAJ,CAAW,oBAAX,CAAN;AACvCuD,QAAAA,SAAS,GAAGrE,GAAZ;AACAA,QAAAA,GAAG,GAAG,EAAN;AACH;AACJ;;AAED,UAAMuE,aAAa,GAAG,KAAK/B,OAAL,CAAa/C,MAAb,CAAoBX,qBAAqB,CAAC4D,EAAD,CAAzC,EAA+C5D,qBAAqB,CAACsF,aAAD,CAApE,EAAqFpE,GAArF,CAAtB;AACAqE,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAC2B,QAAjBG,iBAAiB,CAACV,QAAD,EAAWW,QAAX,EAAqBJ,SAAS,GAAG,EAAjC,EAAqC;AACxD,UAAME,aAAa,GAAG,KAAK/B,OAAL,CAAagC,iBAAb,CAA+BV,QAA/B,EAAyCW,QAAzC,CAAtB;AACAJ,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAC0B,QAAhBK,gBAAgB,CAACrE,IAAD,EAAOsE,EAAP,EAAWjC,EAAX,EAAekC,MAAf,EAAuBpE,IAAvB,EAA6B6D,SAAS,GAAG,EAAzC,EAA6C;AAC/D,QAAI7D,IAAI,IAAIjC,CAAC,CAAC+F,QAAF,CAAW9D,IAAX,CAAZ,EAA8B;AAC1B,UAAIA,IAAI,CAACF,GAAL,KAAaJ,SAAb,IAA0BM,IAAI,CAACH,IAAL,KAAcH,SAA5C,EAAuD;AACnD,YAAIgC,MAAM,CAACC,IAAP,CAAYkC,SAAZ,EAAuBhB,MAAvB,GAAgC,CAApC,EAAuC,MAAM,IAAIvC,KAAJ,CAAW,oBAAX,CAAN;AACvCuD,QAAAA,SAAS,GAAG7D,IAAZ;AACAA,QAAAA,IAAI,GAAGqE,MAAM,CAACxE,IAAP,CAAY,EAAZ,CAAP;AACH;AACJ;;AAED,QAAIG,IAAI,IAAI,CAACjC,CAAC,CAACuG,QAAF,CAAWtE,IAAX,CAAb,EAA+B;AAC3B,UAAIjC,CAAC,CAAC6B,QAAF,CAAWI,IAAX,KAAoB,CAACrB,WAAW,CAACqB,IAAD,CAApC,EAA4CA,IAAI,GAAGpB,KAAK,CAACoB,IAAD,CAAZ;AAC5CA,MAAAA,IAAI,GAAGtB,QAAQ,CAACsB,IAAD,CAAf;AACH;;AAED,UAAM+D,aAAa,GAAG,KAAK/B,OAAL,CAAakC,gBAAb,CAA8BrE,IAA9B,EAAoCsE,EAApC,EAAwC7F,qBAAqB,CAAC4D,EAAD,CAA7D,EAAmE5D,qBAAqB,CAAC8F,MAAD,CAAxF,EAAkGpE,IAAlG,CAAtB;AACA6D,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAC+B,QAArBU,qBAAqB,CAAC1E,IAAD,EAAOsE,EAAP,EAAWvB,GAAX,EAAgB4B,OAAhB,EAAyBxE,IAAzB,EAA+B6D,SAAS,GAAG,EAA3C,EAA+C;AACtE,QAAI7D,IAAI,IAAIjC,CAAC,CAAC+F,QAAF,CAAW9D,IAAX,CAAZ,EAA8B;AAC1B,UAAIA,IAAI,CAACF,GAAL,KAAaJ,SAAb,IAA0BM,IAAI,CAACH,IAAL,KAAcH,SAA5C,EAAuD;AACnD,YAAIgC,MAAM,CAACC,IAAP,CAAYkC,SAAZ,EAAuBhB,MAAvB,GAAgC,CAApC,EAAuC,MAAM,IAAIvC,KAAJ,CAAW,oBAAX,CAAN;AACvCuD,QAAAA,SAAS,GAAG7D,IAAZ;AACAA,QAAAA,IAAI,GAAGqE,MAAM,CAACxE,IAAP,CAAY,EAAZ,CAAP;AACH;AACJ;;AAED,QAAIG,IAAI,IAAI,CAACjC,CAAC,CAACuG,QAAF,CAAWtE,IAAX,CAAb,EAA+B;AAC3B,UAAIjC,CAAC,CAAC6B,QAAF,CAAWI,IAAX,KAAoB,CAACrB,WAAW,CAACqB,IAAD,CAApC,EAA4CA,IAAI,GAAGpB,KAAK,CAACoB,IAAD,CAAZ;AAC5CA,MAAAA,IAAI,GAAGtB,QAAQ,CAACsB,IAAD,CAAf;AACH;;AAED,QAAI4C,GAAG,CAACC,MAAJ,KAAe2B,OAAO,CAAC3B,MAA3B,EAAmC,MAAM,IAAIvC,KAAJ,CAAW,4CAAX,CAAN;AAEnC,UAAMwC,iBAAiB,GAAG,EAA1B;AACA,UAAM2B,qBAAqB,GAAG,EAA9B;;AACA,SAAK,IAAI1B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACC,MAAxB,EAAgCE,CAAC,EAAjC,EAAqC;AACjCD,MAAAA,iBAAiB,CAACE,IAAlB,CAAuB1E,qBAAqB,CAACsE,GAAG,CAACG,CAAD,CAAJ,CAA5C;AACA0B,MAAAA,qBAAqB,CAACzB,IAAtB,CAA2B1E,qBAAqB,CAACkG,OAAO,CAACzB,CAAD,CAAR,CAAhD;AACH;;AAED,UAAMgB,aAAa,GAAG,KAAK/B,OAAL,CAAauC,qBAAb,CAAmC1E,IAAnC,EAAyCsE,EAAzC,EAA6CrB,iBAA7C,EAAgE2B,qBAAhE,EAAuFzE,IAAvF,CAAtB;AAEA6D,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACc,QAAJa,IAAI,CAACC,MAAD,EAASzC,EAAT,EAAa0C,MAAb,EAAqBf,SAAS,GAAG,EAAjC,EAAqC;AAC3C,QAAI9F,CAAC,CAAC8G,OAAF,CAAUF,MAAV,MAAsB5G,CAAC,CAAC8G,OAAF,CAAUD,MAAV,CAA1B,EACI,MAAM,IAAItE,KAAJ,CAAW,2GAAX,CAAN;AAEJ,QAAIyD,aAAJ;;AACA,QAAIhG,CAAC,CAAC8G,OAAF,CAAUF,MAAV,CAAJ,EAAuB;AACnB,UAAIA,MAAM,CAAC9B,MAAP,KAAkB+B,MAAM,CAAC/B,MAA7B,EAAqC,MAAM,IAAIvC,KAAJ,CAAW,8CAAX,CAAN;AAErC,YAAMwE,oBAAoB,GAAG,EAA7B;;AACA,WAAK,MAAMC,GAAX,IAAkBH,MAAlB,EAA0B;AACtBE,QAAAA,oBAAoB,CAAC9B,IAArB,CAA0B1E,qBAAqB,CAACyG,GAAD,CAA/C;AACH;;AAEDhB,MAAAA,aAAa,GAAG,KAAK/B,OAAL,CAAa0C,IAAb,CAAkBpG,qBAAqB,CAAC4D,EAAD,CAAvC,EAA6CyC,MAA7C,EAAqDG,oBAArD,CAAhB;AACH,KATD,MASO;AACHf,MAAAA,aAAa,GAAG,KAAK/B,OAAL,CAAa0C,IAAb,CAAkBpG,qBAAqB,CAAC4D,EAAD,CAAvC,EAA6CyC,MAA7C,EAAqDrG,qBAAqB,CAACsG,MAAD,CAA1E,CAAhB;AACH;;AAEDf,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACmB,QAATmB,SAAS,CAACb,EAAD,EAAKvB,GAAL,EAAUgC,MAAV,EAAkBf,SAAS,GAAG,EAA9B,EAAkC;AAC7C,QAAIjB,GAAG,CAACC,MAAJ,KAAe+B,MAAM,CAAC/B,MAA1B,EAAkC,MAAM,IAAIvC,KAAJ,CAAW,2CAAX,CAAN;AAElC,UAAMwC,iBAAiB,GAAG,EAA1B;AACA,UAAMgC,oBAAoB,GAAG,EAA7B;;AACA,SAAK,IAAI/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACC,MAAxB,EAAgCE,CAAC,EAAjC,EAAqC;AACjCD,MAAAA,iBAAiB,CAACE,IAAlB,CAAuB1E,qBAAqB,CAACsE,GAAG,CAACG,CAAD,CAAJ,CAA5C;AACA+B,MAAAA,oBAAoB,CAAC9B,IAArB,CAA0B1E,qBAAqB,CAACsG,MAAM,CAAC7B,CAAD,CAAP,CAA/C;AACH;;AAED,UAAMgB,aAAa,GAAG,KAAK/B,OAAL,CAAagD,SAAb,CAAuBb,EAAvB,EAA2BrB,iBAA3B,EAA8CgC,oBAA9C,CAAtB;AACAjB,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACmB,QAAToB,SAAS,CAACzC,OAAD,EAAUqB,SAAS,GAAG,EAAtB,EAA0B;AACrC,UAAME,aAAa,GAAG,KAAK/B,OAAL,CAAaiD,SAAb,CAAuBzC,OAAvB,CAAtB;AACAqB,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACwB,QAAdqB,cAAc,CAACrB,SAAS,GAAG,EAAb,EAAiB;AACjC,UAAME,aAAa,GAAG,KAAK/B,OAAL,CAAakD,cAAb,EAAtB;AACArB,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACc,QAAJsB,IAAI,CAAC3C,OAAD,EAAUN,EAAV,EAAcnC,KAAd,EAAqB8D,SAAS,GAAG,EAAjC,EAAqC;AAC3C,UAAME,aAAa,GAAG,KAAK/B,OAAL,CAAamD,IAAb,CAAkB3C,OAAlB,EAA2BlE,qBAAqB,CAAC4D,EAAD,CAAhD,EAAsD5D,qBAAqB,CAACyB,KAAD,CAA3E,CAAtB;AACA8D,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACmB,QAATuB,SAAS,CAAC5C,OAAD,EAAUI,GAAV,EAAegC,MAAf,EAAuBf,SAAS,GAAG,EAAnC,EAAuC;AAClD,QAAIjB,GAAG,CAACC,MAAJ,KAAe+B,MAAM,CAAC/B,MAA1B,EAAkC,MAAM,IAAIvC,KAAJ,CAAW,2CAAX,CAAN;AAElC,UAAMwC,iBAAiB,GAAG,EAA1B;AACA,UAAMgC,oBAAoB,GAAG,EAA7B;;AACA,SAAK,IAAI/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACC,MAAxB,EAAgCE,CAAC,EAAjC,EAAqC;AACjCD,MAAAA,iBAAiB,CAACE,IAAlB,CAAuB1E,qBAAqB,CAACsE,GAAG,CAACG,CAAD,CAAJ,CAA5C;AACA+B,MAAAA,oBAAoB,CAAC9B,IAArB,CAA0B1E,qBAAqB,CAACsG,MAAM,CAAC7B,CAAD,CAAP,CAA/C;AACH;;AAED,UAAMgB,aAAa,GAAG,KAAK/B,OAAL,CAAaoD,SAAb,CAAuB5C,OAAvB,EAAgCM,iBAAhC,EAAmDgC,oBAAnD,CAAtB;AACAjB,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACe,QAALwB,KAAK,CAACnD,EAAD,EAAK2B,SAAS,GAAG,EAAjB,EAAqB;AAC5B,QAAInC,MAAM,CAACC,IAAP,CAAYkC,SAAZ,EAAuBhB,MAAvB,KAAkC,CAAlC,IAAuC9E,CAAC,CAAC+F,QAAF,CAAW5B,EAAX,CAA3C,EAA2D;AACvD2B,MAAAA,SAAS,GAAG3B,EAAZ;AACAA,MAAAA,EAAE,GAAGxC,SAAL;AACH;;AAED,UAAMqE,aAAa,GAAG7B,EAAE,KAAKxC,SAAP,GAAmB,KAAKsC,OAAL,CAAaqD,KAAb,CAAmB/G,qBAAqB,CAAC4D,EAAD,CAAxC,CAAnB,GAAmE,KAAKF,OAAL,CAAaqD,KAAb,EAAzF;AACAxB,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACiB,QAAPyB,OAAO,CAACpD,EAAD,EAAK2B,SAAS,GAAG,EAAjB,EAAqB;AAC9B,QAAInC,MAAM,CAACC,IAAP,CAAYkC,SAAZ,EAAuBhB,MAAvB,KAAkC,CAAlC,IAAuC9E,CAAC,CAAC+F,QAAF,CAAW5B,EAAX,CAA3C,EAA2D;AACvD2B,MAAAA,SAAS,GAAG3B,EAAZ;AACAA,MAAAA,EAAE,GAAGxC,SAAL;AACH;;AAED,UAAMqE,aAAa,GAAG7B,EAAE,KAAKxC,SAAP,GAAmB,KAAKsC,OAAL,CAAasD,OAAb,CAAqBhH,qBAAqB,CAAC4D,EAAD,CAA1C,CAAnB,GAAqE,KAAKF,OAAL,CAAasD,OAAb,EAA3F;AACAzB,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACmB,QAAT0B,SAAS,CAAC/C,OAAD,EAAUqB,SAAS,GAAG,EAAtB,EAA0B;AACrC,UAAME,aAAa,GAAG,KAAK/B,OAAL,CAAauD,SAAb,CAAuB/C,OAAvB,CAAtB;AACAqB,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACwB,QAAd2B,cAAc,CAAC3B,SAAS,GAAG,EAAb,EAAiB;AACjC,UAAME,aAAa,GAAG,KAAK/B,OAAL,CAAawD,cAAb,EAAtB;AACA3B,IAAAA,SAAS,GAAG,MAAMxF,mBAAmB,CAAC0F,aAAD,EAAgBF,SAAhB,EAA2B,KAAKrD,OAAhC,CAArC;AAEA,WAAOuD,aAAa,CAAC7D,IAAd,CAAmB2D,SAAnB,CAAP;AACH;;AA3kBwB;;AA8kB7B7E,KAAK,CAACyG,QAAN,GAAiBrH,aAAjB;AACAsH,MAAM,CAACC,OAAP,GAAiB3G,KAAjB","sourcesContent":["/*\n    Copyright 2021 The caver-js Authors\n    This file is part of the caver-js library.\n\n    The caver-js library is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    The caver-js library is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\n*/\n\nconst _ = require('lodash')\nconst BigNumber = require('bignumber.js')\n\nconst Contract = require('../../caver-contract')\nconst {\n    kip37JsonInterface,\n    kip37ByteCode,\n    determineSendParams,\n    formatParamForUint256,\n    validateDeployParameterForKIP37,\n    interfaceIds,\n} = require('./kctHelper')\nconst { isAddress, toBuffer, isHexStrict, toHex, stripHexPrefix, leftPad } = require('../../caver-utils')\nconst KIP13 = require('../src/kip13')\n\nclass KIP37 extends Contract {\n    /**\n     * Creates an instance of KIP37.\n     * @method create\n     * @param {string} tokenAddress - The KIP-73 token contract address.\n     * @param {Array} [abi] - The Contract Application Binary Interface (ABI) of the KIP-37.\n     * @return {object}\n     */\n    static create(tokenAddress, abi) {\n        return new KIP37(tokenAddress, abi)\n    }\n\n    /**\n     * deploy deploys a KIP-37 token contract to Klaytn network.\n     * `const deployedContract = await caver.kct.kip37.deploy({\n     *      uri: ''\n     *  }, '0x{address in hex}')`\n     *\n     * @method deploy\n     * @param {Object} tokenInfo The object that defines the uri to deploy.\n     * @param {Object|String} sendOptions The address of the account to deploy the KIP-37 token contract or an object holding parameters that are required for sending a transaction.\n     * @param {IWallet} [wallet] The wallet instance to sign and send a transaction.\n     * @return {Object}\n     */\n    static deploy(tokenInfo, sendOptions, wallet) {\n        validateDeployParameterForKIP37(tokenInfo)\n\n        const { uri } = tokenInfo\n        const kip37 = new KIP37()\n        if (wallet !== undefined) kip37.setWallet(wallet)\n\n        // If sendOptions is string type, sendOptions means deployer's address\n        if (_.isString(sendOptions)) sendOptions = { from: sendOptions, gas: 7000000, value: 0 }\n        sendOptions.gas = sendOptions.gas !== undefined ? sendOptions.gas : 7000000\n\n        return kip37\n            .deploy({\n                data: kip37ByteCode,\n                arguments: [uri],\n            })\n            .send(sendOptions)\n    }\n\n    /**\n     * detectInterface detects which interface the KIP-37 token contract supports.\n     *\n     * @method detectInterface\n     * @param {string} contractAddress The address of the KIP-37 token contract to detect.\n     * @return {object}\n     */\n    static detectInterface(contractAddress) {\n        const kip37 = new KIP37(contractAddress)\n        return kip37.detectInterface()\n    }\n\n    constructor(tokenAddress, abi = kip37JsonInterface) {\n        if (tokenAddress) {\n            if (_.isString(tokenAddress)) {\n                if (!isAddress(tokenAddress)) throw new Error(`Invalid token address ${tokenAddress}`)\n            } else {\n                abi = tokenAddress\n                tokenAddress = undefined\n            }\n        }\n        super(abi, tokenAddress)\n        this.setWallet(KIP37.wallet)\n    }\n\n    clone(tokenAddress = this.options.address) {\n        const cloned = new this.constructor(tokenAddress, this.options.jsonInterface)\n        cloned.setWallet(this._wallet)\n        return cloned\n    }\n\n    /**\n     * detectInterface detects which interface the KIP-37 token contract supports.\n     *\n     * @method detectInterface\n     * @return {object}\n     */\n    async detectInterface() {\n        const detected = {\n            IKIP37: false,\n            IKIP37Metadata: false,\n            IKIP37Mintable: false,\n            IKIP37Burnable: false,\n            IKIP37Pausable: false,\n        }\n\n        const notSupportedMsg = `This contract does not support KIP-13.`\n        const contractAddress = this._address\n\n        try {\n            const isSupported = await KIP13.isImplementedKIP13Interface(contractAddress)\n            if (isSupported !== true) throw new Error(notSupportedMsg)\n\n            // Since there is an extension that has the same interface id even though it is a different KCT,\n            // it must be checked first whether the contract is a KIP-37 contract.\n            detected.IKIP37 = await this.supportsInterface(interfaceIds.kip37.IKIP37)\n            if (detected.IKIP37 === false) return detected\n\n            await Promise.all(\n                Object.keys(interfaceIds.kip37).map(async interfaceName => {\n                    if (interfaceIds.kip37[interfaceName] !== interfaceIds.kip37.IKIP37)\n                        detected[interfaceName] = await this.supportsInterface(interfaceIds.kip37[interfaceName])\n                })\n            )\n            return detected\n        } catch (e) {\n            throw new Error(notSupportedMsg)\n        }\n    }\n\n    /**\n     * supportsInterface checks whether interface is supported or not.\n     *\n     * @method supportsInterface\n     * @param {string} interfaceId The interface id to check.\n     * @return {boolean}\n     */\n    async supportsInterface(interfaceId) {\n        const isSupported = await this.methods.supportsInterface(interfaceId).call()\n        return isSupported\n    }\n\n    /**\n     * uri returns distinct Uniform Resource Identifier (URI) for a given token.\n     * If the string {id} exists in any URI, this function will replace this with the actual token ID in hexadecimal form.\n     * Please refer to http://kips.klaytn.com/KIPs/kip-37#metadata\n     *\n     * @method uri\n     * @param {BigNumber|string|number} id The token id to get uri.\n     * @return {string}\n     */\n    async uri(id) {\n        let uri = await this.methods.uri(formatParamForUint256(id)).call()\n\n        // Replace {id} to token id in hexadecimal form.\n        if (uri.includes('{id}')) {\n            let tokenIdInHex = stripHexPrefix(toHex(id))\n            tokenIdInHex = leftPad(tokenIdInHex, 64, '0')\n            uri = uri.replace('{id}', tokenIdInHex)\n        }\n        return uri\n    }\n\n    /**\n     * totalSupply returns the total supply of the specific token.\n     *\n     * @param {BigNumber|string|number} id The token id to see the total supply.\n     * @method totalSupply\n     * @return {BigNumber}\n     */\n    async totalSupply(id) {\n        const totalSupply = await this.methods.totalSupply(formatParamForUint256(id)).call()\n        return new BigNumber(totalSupply)\n    }\n\n    /**\n     * balanceOf returns the balance of the account.\n     *\n     * @method balanceOf\n     * @param {string} account The address of the account for which you want to see balance.\n     * @param {BigNumber|string|number} id The token id to see balance.\n     * @return {BigNumber}\n     */\n    async balanceOf(account, id) {\n        const balance = await this.methods.balanceOf(account, formatParamForUint256(id)).call()\n        return new BigNumber(balance)\n    }\n\n    /**\n     * Batch returns the balance of multiple account/token pairs. `accounts` and `ids` must have the same length.\n     *\n     * @method balanceOfBatch\n     * @param {Array.<string>} accounts The address of the accounts for which you want to see balance.\n     * @param {Array.<BigNumber|string|number>} ids An array of ids of token you want to see balance.\n     * @return {BigNumber}\n     */\n    async balanceOfBatch(accounts, ids) {\n        if (ids.length !== accounts.length) throw new Error(`ids and accounts must have the same length.`)\n\n        const formattedTokenIds = []\n        for (let i = 0; i < ids.length; i++) {\n            formattedTokenIds.push(formatParamForUint256(ids[i]))\n        }\n\n        const balances = await this.methods.balanceOfBatch(accounts, formattedTokenIds).call()\n\n        const ret = []\n        for (const bal of balances) {\n            ret.push(new BigNumber(bal))\n        }\n\n        return ret\n    }\n\n    /**\n     * isApprovedForAll returns true if an operator is approved by a given owner.\n     *\n     * @method isApprovedForAll\n     * @param {string} owner The address of the owner.\n     * @param {string} operator The address of the operator.\n     * @return {boolean}\n     */\n    async isApprovedForAll(owner, operator) {\n        const isApprovedForAll = await this.methods.isApprovedForAll(owner, operator).call()\n        return isApprovedForAll\n    }\n\n    /**\n     * paused returns whether or not the token contract's transaction (or specific token) is paused.\n     * If id is not defined, checks whether the token contract's transaction is paused.\n     * If id is defined, checks whether the specific token is paused.\n     *\n     * @param {BigNumber|string|number} [id] The id of token to check wether paused or not.\n     * @method paused\n     * @return {boolean}\n     */\n    async paused(id) {\n        const callObject = id !== undefined ? this.methods.paused(formatParamForUint256(id)) : this.methods.paused()\n        const isPaused = await callObject.call()\n        return isPaused\n    }\n\n    /**\n     * isPauser returns whether the account is pauser or not.\n     *\n     * @method isPauser\n     * @param {string} account The address of the account you want to check pauser or not.\n     * @return {boolean}\n     */\n    async isPauser(account) {\n        const isPauser = await this.methods.isPauser(account).call()\n        return isPauser\n    }\n\n    /**\n     * isMinter returns whether the account is minter or not.\n     *\n     * @method isMinter\n     * @param {string} account The address of the account you want to check minter or not.\n     * @return {boolean}\n     */\n    async isMinter(account) {\n        const isMinter = await this.methods.isMinter(account).call()\n        return isMinter\n    }\n\n    /**\n     * create creates token and assigns them to account, increasing the total supply.\n     *\n     * @method mint\n     * @param {BigNumber|string|number} id The id of token to mint.\n     * @param {BigNumber|string|number} initialSupply The amount of tokens being minted.\n     * @param {string} [uri] The token URI of the created token.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async create(id, initialSupply, uri, sendParam = {}) {\n        if (uri && _.isObject(uri)) {\n            if (uri.gas !== undefined || uri.from !== undefined) {\n                if (Object.keys(sendParam).length > 0) throw new Error(`Invalid parameters`)\n                sendParam = uri\n                uri = ''\n            }\n        }\n\n        const executableObj = this.methods.create(formatParamForUint256(id), formatParamForUint256(initialSupply), uri)\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * setApprovalForAll enables or disables approval for a third party (\"operator\") to manage all of the caller's tokens.\n     * An operator is allowed to transfer all tokens of the sender on their behalf.\n     *\n     * @method setApprovalForAll\n     * @param {string} operator The address to add to the set of authorized operators.\n     * @param {boolean} approved True if the operator is approved, false to revoke approval.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async setApprovalForAll(operator, approved, sendParam = {}) {\n        const executableObj = this.methods.setApprovalForAll(operator, approved)\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * safeTransferFrom safely transfers the ownership of a given token id to another address.\n     *\n     * @method safeTransferFrom\n     * @param {string} from The address of the owner or approved of the given token.\n     * @param {string} to The address of the account to receive the token.\n     * @param {BigNumber|string|number} id The id of token you want to transfer.\n     * @param {BigNumber|string|number} amount The amount of tokens you want to transfer.\n     * @param {Buffer|string|number} [data] (optional) The data to send along with the call.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async safeTransferFrom(from, to, id, amount, data, sendParam = {}) {\n        if (data && _.isObject(data)) {\n            if (data.gas !== undefined || data.from !== undefined) {\n                if (Object.keys(sendParam).length > 0) throw new Error(`Invalid parameters`)\n                sendParam = data\n                data = Buffer.from('')\n            }\n        }\n\n        if (data && !_.isBuffer(data)) {\n            if (_.isString(data) && !isHexStrict(data)) data = toHex(data)\n            data = toBuffer(data)\n        }\n\n        const executableObj = this.methods.safeTransferFrom(from, to, formatParamForUint256(id), formatParamForUint256(amount), data)\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * safeBatchTransferFrom safely transfers the ownership of given token ids to another address.\n     *\n     * @method safeBatchTransferFrom\n     * @param {string} from The address of the owner or approved of the given token.\n     * @param {string} to The address of the account to receive the token.\n     * @param {Array.<BigNumber|string|number>} ids An array of ids of token you want to transfer.\n     * @param {Array.<BigNumber|string|number>} amounts An array of amount of tokens you want to transfer.\n     * @param {Buffer|string|number} [data] (optional) The data to send along with the call.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async safeBatchTransferFrom(from, to, ids, amounts, data, sendParam = {}) {\n        if (data && _.isObject(data)) {\n            if (data.gas !== undefined || data.from !== undefined) {\n                if (Object.keys(sendParam).length > 0) throw new Error(`Invalid parameters`)\n                sendParam = data\n                data = Buffer.from('')\n            }\n        }\n\n        if (data && !_.isBuffer(data)) {\n            if (_.isString(data) && !isHexStrict(data)) data = toHex(data)\n            data = toBuffer(data)\n        }\n\n        if (ids.length !== amounts.length) throw new Error(`ids and amounts must have the same length.`)\n\n        const formattedTokenIds = []\n        const formattedTokenAmounts = []\n        for (let i = 0; i < ids.length; i++) {\n            formattedTokenIds.push(formatParamForUint256(ids[i]))\n            formattedTokenAmounts.push(formatParamForUint256(amounts[i]))\n        }\n\n        const executableObj = this.methods.safeBatchTransferFrom(from, to, formattedTokenIds, formattedTokenAmounts, data)\n\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * mint mints tokens of the specific token type `id` and assigns the tokens according to the variables `to` and `value`.\n     *\n     * @method mint\n     * @param {string|Array.<string>} toList The address that will receive the minted tokens. If there are multiple to accounts, the values mapped to each to must also be an array.\n     * @param {BigNumber|string|number} id The id of token to mint.\n     * @param {BigNumber|string|number|Array.<BigNumber|string|number>} values The quantity of tokens being minted.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async mint(toList, id, values, sendParam = {}) {\n        if (_.isArray(toList) !== _.isArray(values))\n            throw new Error(`If you want to minting a specific token to multiple accounts, both toList and values both must be arrays.`)\n\n        let executableObj\n        if (_.isArray(toList)) {\n            if (toList.length !== values.length) throw new Error(`toList and values must have the same length.`)\n\n            const formattedTokenValues = []\n            for (const val of values) {\n                formattedTokenValues.push(formatParamForUint256(val))\n            }\n\n            executableObj = this.methods.mint(formatParamForUint256(id), toList, formattedTokenValues)\n        } else {\n            executableObj = this.methods.mint(formatParamForUint256(id), toList, formatParamForUint256(values))\n        }\n\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * mintBatch mints multiple KIP-37 tokens of the specific token types `ids` in a batch and assigns the tokens according to the variables `to` and `values`.\n     *\n     * @method mintBatch\n     * @param {string} to The address that will receive the minted tokens.\n     * @param {Array.<BigNumber|string|number>} ids The list of the token ids to mint.\n     * @param {Array.<BigNumber|string|number>} values The list of the token amounts to mint.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async mintBatch(to, ids, values, sendParam = {}) {\n        if (ids.length !== values.length) throw new Error(`ids and values must have the same length.`)\n\n        const formattedTokenIds = []\n        const formattedTokenValues = []\n        for (let i = 0; i < ids.length; i++) {\n            formattedTokenIds.push(formatParamForUint256(ids[i]))\n            formattedTokenValues.push(formatParamForUint256(values[i]))\n        }\n\n        const executableObj = this.methods.mintBatch(to, formattedTokenIds, formattedTokenValues)\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * addMinter adds an account as a minter that has the permission of MinterRole and can mint.\n     * The account sending transaction to execute the addMinter must be a Minter with a MinterRole.\n     *\n     * @method addMinter\n     * @param {string} account The address of account to add as minter.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async addMinter(account, sendParam = {}) {\n        const executableObj = this.methods.addMinter(account)\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * renounceMinter renounces privilege of MinterRole.\n     * The account sending transaction to execute the renounceMinter must be a Minter with a MinterRole.\n     *\n     * @method renounceMinter\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async renounceMinter(sendParam = {}) {\n        const executableObj = this.methods.renounceMinter()\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * burn destroys specific KIP37 tokens.\n     *\n     * @method burn\n     * @param {string} account The account that owns tokens.\n     * @param {BigNumber|string|number} id The token id to burn.\n     * @param {BigNumber|string|number} value The token amount to burn.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-7 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-7 abi.\n     */\n    async burn(account, id, value, sendParam = {}) {\n        const executableObj = this.methods.burn(account, formatParamForUint256(id), formatParamForUint256(value))\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * burnBatch burns multiple KIP37 tokens.\n     *\n     * @method burnBatch\n     * @param {string} account The account that owns tokens.\n     * @param {Array.<BigNumber|string|number>} ids The list of the token ids to burn.\n     * @param {Array.<BigNumber|string|number>} values The list of the token amounts to burn.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async burnBatch(account, ids, values, sendParam = {}) {\n        if (ids.length !== values.length) throw new Error(`ids and values must have the same length.`)\n\n        const formattedTokenIds = []\n        const formattedTokenValues = []\n        for (let i = 0; i < ids.length; i++) {\n            formattedTokenIds.push(formatParamForUint256(ids[i]))\n            formattedTokenValues.push(formatParamForUint256(values[i]))\n        }\n\n        const executableObj = this.methods.burnBatch(account, formattedTokenIds, formattedTokenValues)\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * pause pauses actions related to transfer and approval.\n     * If id is not defined, pauses the token contract.\n     * If id is defined, pauses the specific token.\n     * The account sending transaction to execute the pause must be a Pauser with a PauserRole.\n     *\n     * @method pause\n     * @param {BigNumber|string|number} [id] The id of token to pause.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async pause(id, sendParam = {}) {\n        if (Object.keys(sendParam).length === 0 && _.isObject(id)) {\n            sendParam = id\n            id = undefined\n        }\n\n        const executableObj = id !== undefined ? this.methods.pause(formatParamForUint256(id)) : this.methods.pause()\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * unpause resumes from the paused state.\n     * If id is not defined, unpauses the token contract.\n     * If id is defined, unpauses the specific token.\n     * The account sending transaction to execute the unpause must be a Pauser with a PauserRole.\n     *\n     * @method unpause\n     * @param {BigNumber|string|number} [id] The id of token to unpause.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async unpause(id, sendParam = {}) {\n        if (Object.keys(sendParam).length === 0 && _.isObject(id)) {\n            sendParam = id\n            id = undefined\n        }\n\n        const executableObj = id !== undefined ? this.methods.unpause(formatParamForUint256(id)) : this.methods.unpause()\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * addPauser adds an account as a pauser that has the permission of PauserRole and can pause.\n     * The account sending transaction to execute the addPauser must be a Pauser with a PauserRole.\n     *\n     * @method addPauser\n     * @param {string} account The address of account to add as pauser.\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async addPauser(account, sendParam = {}) {\n        const executableObj = this.methods.addPauser(account)\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n\n    /**\n     * renouncePauser renounces privilege of PauserRole.\n     * The account sending transaction to execute the renouncePauser must be a Pauser with a PauserRole.\n     *\n     * @method renouncePauser\n     * @param {Object} [sendParam] (optional) An object with defined parameters for sending a transaction.\n     * @return {Object} A receipt containing the execution result of the transaction for executing the KIP-37 token contract.\n     *                  In this receipt, instead of the logs property, there is an events property parsed by KIP-37 abi.\n     */\n    async renouncePauser(sendParam = {}) {\n        const executableObj = this.methods.renouncePauser()\n        sendParam = await determineSendParams(executableObj, sendParam, this.options)\n\n        return executableObj.send(sendParam)\n    }\n}\n\nKIP37.byteCode = kip37ByteCode\nmodule.exports = KIP37\n"]},"metadata":{},"sourceType":"script"}