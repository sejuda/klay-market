{"ast":null,"code":"import axios from \"axios\";\nimport { COUNT_CONTRACT_ADDRESS } from \"../constants\";\nconst A2P_API_PREPARE_URL = \"https://a2a-api.klipwallet.com/v2/a2a/prepare\";\nconst APP_NAME = \"KLAY_MARKET\";\nexport const setCount = (count, setQrvalue) => {\n  axios.post(A2P_API_PREPARE_URL, {\n    bapp: {\n      name: APP_NAME\n    },\n    type: \"execute_contract\",\n    transaction: {\n      to: COUNT_CONTRACT_ADDRESS,\n      value: \"0\",\n      abi: `{ \"constant\": false, \"inputs\": [{ \"name\": \"_count\", \"type\": \"uint256\" }], \"name\": \"setCount\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }`,\n      params: `[\\\"${count}\\\"]`\n    }\n  }).then(response => {\n    const request_key = response.data.request_key;\n    const qrcode = `https://klipwallet.com/?target=/a2a?request_key=${request_key}`;\n    setQrvalue(qrcode); // const {request_key} = response.data.request_key\n\n    let timerId = setInterval(() => {\n      axios.get(`https://a2a-api.klipwallet.com/v2/a2a/result?request_key=${request_key}`).then(res => {\n        if (res.data.result) {\n          console.log(`[Result] ${JSON.stringify(res.data.result)}`);\n          clearInterval(timerId);\n        }\n      });\n    }, 1000);\n  });\n};\nexport const getAddress = setQrvalue => {\n  axios.post(A2P_API_PREPARE_URL, {\n    bapp: {\n      name: APP_NAME\n    },\n    type: \"auth\"\n  }).then(response => {\n    const request_key = response.data.request_key;\n    const qrcode = `https://klipwallet.com/?target=/a2a?request_key=${request_key}`;\n    setQrvalue(qrcode); // const {request_key} = response.data.request_key\n\n    let timerId = setInterval(() => {\n      axios.get(`https://a2a-api.klipwallet.com/v2/a2a/result?request_key=${request_key}`).then(res => {\n        if (res.data.result) {\n          console.log(`[Result] ${JSON.stringify(res.data.result)}`);\n          clearInterval(timerId);\n        }\n      });\n    }, 1000);\n  });\n};","map":{"version":3,"sources":["/Users/mac/Desktop/klay-market/src/api/UseKlip.js"],"names":["axios","COUNT_CONTRACT_ADDRESS","A2P_API_PREPARE_URL","APP_NAME","setCount","count","setQrvalue","post","bapp","name","type","transaction","to","value","abi","params","then","response","request_key","data","qrcode","timerId","setInterval","get","res","result","console","log","JSON","stringify","clearInterval","getAddress"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,sBAAT,QAAuC,cAAvC;AAEA,MAAMC,mBAAmB,GAAG,+CAA5B;AACA,MAAMC,QAAQ,GAAG,aAAjB;AACA,OAAO,MAAMC,QAAQ,GAAG,CAACC,KAAD,EAAQC,UAAR,KAAuB;AAC7CN,EAAAA,KAAK,CACFO,IADH,CACQL,mBADR,EAC6B;AACzBM,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAEN;AADF,KADmB;AAIzBO,IAAAA,IAAI,EAAE,kBAJmB;AAKzBC,IAAAA,WAAW,EAAE;AACXC,MAAAA,EAAE,EAAEX,sBADO;AAEXY,MAAAA,KAAK,EAAE,GAFI;AAGXC,MAAAA,GAAG,EAAG,sLAHK;AAIXC,MAAAA,MAAM,EAAG,MAAKV,KAAM;AAJT;AALY,GAD7B,EAaGW,IAbH,CAaSC,QAAD,IAAc;AAClB,UAAMC,WAAW,GAAGD,QAAQ,CAACE,IAAT,CAAcD,WAAlC;AACA,UAAME,MAAM,GAAI,mDAAkDF,WAAY,EAA9E;AACAZ,IAAAA,UAAU,CAACc,MAAD,CAAV,CAHkB,CAIlB;;AAEA,QAAIC,OAAO,GAAGC,WAAW,CAAC,MAAM;AAC9BtB,MAAAA,KAAK,CACFuB,GADH,CAEK,4DAA2DL,WAAY,EAF5E,EAIGF,IAJH,CAISQ,GAAD,IAAS;AACb,YAAIA,GAAG,CAACL,IAAJ,CAASM,MAAb,EAAqB;AACnBC,UAAAA,OAAO,CAACC,GAAR,CAAa,YAAWC,IAAI,CAACC,SAAL,CAAeL,GAAG,CAACL,IAAJ,CAASM,MAAxB,CAAgC,EAAxD;AACAK,UAAAA,aAAa,CAACT,OAAD,CAAb;AACD;AACF,OATH;AAUD,KAXwB,EAWtB,IAXsB,CAAzB;AAYD,GA/BH;AAgCD,CAjCM;AAmCP,OAAO,MAAMU,UAAU,GAAIzB,UAAD,IAAgB;AACxCN,EAAAA,KAAK,CACFO,IADH,CACQL,mBADR,EAC6B;AACzBM,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAEN;AADF,KADmB;AAIzBO,IAAAA,IAAI,EAAE;AAJmB,GAD7B,EAOGM,IAPH,CAOSC,QAAD,IAAc;AAClB,UAAMC,WAAW,GAAGD,QAAQ,CAACE,IAAT,CAAcD,WAAlC;AACA,UAAME,MAAM,GAAI,mDAAkDF,WAAY,EAA9E;AACAZ,IAAAA,UAAU,CAACc,MAAD,CAAV,CAHkB,CAIlB;;AAEA,QAAIC,OAAO,GAAGC,WAAW,CAAC,MAAM;AAC9BtB,MAAAA,KAAK,CACFuB,GADH,CAEK,4DAA2DL,WAAY,EAF5E,EAIGF,IAJH,CAISQ,GAAD,IAAS;AACb,YAAIA,GAAG,CAACL,IAAJ,CAASM,MAAb,EAAqB;AACnBC,UAAAA,OAAO,CAACC,GAAR,CAAa,YAAWC,IAAI,CAACC,SAAL,CAAeL,GAAG,CAACL,IAAJ,CAASM,MAAxB,CAAgC,EAAxD;AACAK,UAAAA,aAAa,CAACT,OAAD,CAAb;AACD;AACF,OATH;AAUD,KAXwB,EAWtB,IAXsB,CAAzB;AAYD,GAzBH;AA0BD,CA3BM","sourcesContent":["import axios from \"axios\";\nimport { COUNT_CONTRACT_ADDRESS } from \"../constants\";\n\nconst A2P_API_PREPARE_URL = \"https://a2a-api.klipwallet.com/v2/a2a/prepare\";\nconst APP_NAME = \"KLAY_MARKET\";\nexport const setCount = (count, setQrvalue) => {\n  axios\n    .post(A2P_API_PREPARE_URL, {\n      bapp: {\n        name: APP_NAME,\n      },\n      type: \"execute_contract\",\n      transaction: {\n        to: COUNT_CONTRACT_ADDRESS,\n        value: \"0\",\n        abi: `{ \"constant\": false, \"inputs\": [{ \"name\": \"_count\", \"type\": \"uint256\" }], \"name\": \"setCount\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }`,\n        params: `[\\\"${count}\\\"]`,\n      },\n    })\n    .then((response) => {\n      const request_key = response.data.request_key;\n      const qrcode = `https://klipwallet.com/?target=/a2a?request_key=${request_key}`;\n      setQrvalue(qrcode);\n      // const {request_key} = response.data.request_key\n\n      let timerId = setInterval(() => {\n        axios\n          .get(\n            `https://a2a-api.klipwallet.com/v2/a2a/result?request_key=${request_key}`\n          )\n          .then((res) => {\n            if (res.data.result) {\n              console.log(`[Result] ${JSON.stringify(res.data.result)}`);\n              clearInterval(timerId);\n            }\n          });\n      }, 1000);\n    });\n};\n\nexport const getAddress = (setQrvalue) => {\n  axios\n    .post(A2P_API_PREPARE_URL, {\n      bapp: {\n        name: APP_NAME,\n      },\n      type: \"auth\",\n    })\n    .then((response) => {\n      const request_key = response.data.request_key;\n      const qrcode = `https://klipwallet.com/?target=/a2a?request_key=${request_key}`;\n      setQrvalue(qrcode);\n      // const {request_key} = response.data.request_key\n\n      let timerId = setInterval(() => {\n        axios\n          .get(\n            `https://a2a-api.klipwallet.com/v2/a2a/result?request_key=${request_key}`\n          )\n          .then((res) => {\n            if (res.data.result) {\n              console.log(`[Result] ${JSON.stringify(res.data.result)}`);\n              clearInterval(timerId);\n            }\n          });\n      }, 1000);\n    });\n};\n"]},"metadata":{},"sourceType":"module"}