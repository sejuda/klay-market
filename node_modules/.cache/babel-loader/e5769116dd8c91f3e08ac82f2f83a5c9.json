{"ast":null,"code":"/*\n    Copyright 2019 The caver-js Authors\n    This file is part of the caver-js library.\n\n    The caver-js library is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    The caver-js library is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\n*/\nconst AccountKeyPublic = require('../accountKey/accountKeyPublic');\n\nconst AccountKeyMultiSig = require('../accountKey/accountKeyMultiSig');\n\nconst AccountKeyRoleBased = require('../accountKey/accountKeyRoleBased');\n\nconst isAddress = require('../../../../caver-utils/src/utils').isAddress;\n\nconst addHexPrefix = require('../../../../caver-utils').addHexPrefix;\n\nclass Account {\n  static fromObject(obj) {\n    return new Account(obj.address, new AccountKeyPublic(obj.privateKey));\n  }\n\n  static isAccountKey(accountKey) {\n    let isAccountKey = false;\n    if (accountKey instanceof AccountKeyPublic) isAccountKey = true;\n    if (accountKey instanceof AccountKeyMultiSig) isAccountKey = true;\n    if (accountKey instanceof AccountKeyRoleBased) isAccountKey = true;\n    return isAccountKey;\n  }\n\n  constructor(address, accountKey) {\n    if (!address || !accountKey) throw new Error('Failed to create Account. address and accountKey are needed to create Account.');\n    if (!isAddress(address)) throw new Error(`Invalid address : ${address}`);\n    if (!Account.isAccountKey(accountKey)) throw new Error('Invalid accountKey.');\n    address = addHexPrefix(address);\n    Object.defineProperty(this, 'address', {\n      get: function () {\n        return address;\n      },\n      set: function (addressInput) {\n        if (!isAddress(addressInput)) throw new Error(`Invalid address : ${addressInput}`);\n        address = addHexPrefix(addressInput);\n      },\n      enumerable: true\n    });\n    Object.defineProperty(this, 'accountKey', {\n      get: function () {\n        return accountKey;\n      },\n      set: function (accountKeyInput) {\n        if (!Account.isAccountKey(accountKeyInput) && accountKeyInput !== null) throw new Error('Invalid accountKey.');\n\n        if (accountKey === null || accountKeyInput === null) {\n          accountKey = accountKeyInput;\n        } else if (accountKey.type !== accountKeyInput.type) {\n          accountKey = accountKeyInput;\n        } else {\n          accountKey.update(accountKeyInput);\n        }\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(this, 'privateKey', {\n      get: function () {\n        return this.accountKey.defaultKey;\n      },\n      set: function () {\n        throw new Error('The privateKey cannot be modified. The privateKey is set to default key of accountKey, so update accountKey to modify the privateKey.');\n      },\n      enumerable: true\n    });\n  }\n\n  get keys() {\n    return this.accountKey.keys;\n  }\n\n  get accountKeyType() {\n    return this.accountKey.type;\n  }\n\n  get transactionKey() {\n    return this.accountKey.transactionKey;\n  }\n\n  get updateKey() {\n    return this.accountKey.updateKey;\n  }\n\n  get feePayerKey() {\n    return this.accountKey.feePayerKey;\n  }\n\n  toPublicKey(toPublicKeyFunc) {\n    return this.accountKey.toPublicKey(toPublicKeyFunc);\n  }\n\n}\n\nmodule.exports = Account;","map":{"version":3,"sources":["/Users/mac/Desktop/klay-market/node_modules/caver-js/packages/caver-klay/caver-klay-accounts/src/account/account.js"],"names":["AccountKeyPublic","require","AccountKeyMultiSig","AccountKeyRoleBased","isAddress","addHexPrefix","Account","fromObject","obj","address","privateKey","isAccountKey","accountKey","constructor","Error","Object","defineProperty","get","set","addressInput","enumerable","accountKeyInput","type","update","configurable","defaultKey","keys","accountKeyType","transactionKey","updateKey","feePayerKey","toPublicKey","toPublicKeyFunc","module","exports"],"mappings":"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","sourcesContent":["/*\n    Copyright 2019 The caver-js Authors\n    This file is part of the caver-js library.\n\n    The caver-js library is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    The caver-js library is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\n*/\n\nconst AccountKeyPublic = require('../accountKey/accountKeyPublic')\nconst AccountKeyMultiSig = require('../accountKey/accountKeyMultiSig')\nconst AccountKeyRoleBased = require('../accountKey/accountKeyRoleBased')\nconst isAddress = require('../../../../caver-utils/src/utils').isAddress\nconst addHexPrefix = require('../../../../caver-utils').addHexPrefix\n\nclass Account {\n    static fromObject(obj) {\n        return new Account(obj.address, new AccountKeyPublic(obj.privateKey))\n    }\n\n    static isAccountKey(accountKey) {\n        let isAccountKey = false\n        if (accountKey instanceof AccountKeyPublic) isAccountKey = true\n        if (accountKey instanceof AccountKeyMultiSig) isAccountKey = true\n        if (accountKey instanceof AccountKeyRoleBased) isAccountKey = true\n\n        return isAccountKey\n    }\n\n    constructor(address, accountKey) {\n        if (!address || !accountKey) throw new Error('Failed to create Account. address and accountKey are needed to create Account.')\n\n        if (!isAddress(address)) throw new Error(`Invalid address : ${address}`)\n        if (!Account.isAccountKey(accountKey)) throw new Error('Invalid accountKey.')\n\n        address = addHexPrefix(address)\n\n        Object.defineProperty(this, 'address', {\n            get: function() {\n                return address\n            },\n            set: function(addressInput) {\n                if (!isAddress(addressInput)) throw new Error(`Invalid address : ${addressInput}`)\n                address = addHexPrefix(addressInput)\n            },\n            enumerable: true,\n        })\n\n        Object.defineProperty(this, 'accountKey', {\n            get: function() {\n                return accountKey\n            },\n            set: function(accountKeyInput) {\n                if (!Account.isAccountKey(accountKeyInput) && accountKeyInput !== null) throw new Error('Invalid accountKey.')\n\n                if (accountKey === null || accountKeyInput === null) {\n                    accountKey = accountKeyInput\n                } else if (accountKey.type !== accountKeyInput.type) {\n                    accountKey = accountKeyInput\n                } else {\n                    accountKey.update(accountKeyInput)\n                }\n            },\n            enumerable: true,\n            configurable: true,\n        })\n\n        Object.defineProperty(this, 'privateKey', {\n            get: function() {\n                return this.accountKey.defaultKey\n            },\n            set: function() {\n                throw new Error(\n                    'The privateKey cannot be modified. The privateKey is set to default key of accountKey, so update accountKey to modify the privateKey.'\n                )\n            },\n            enumerable: true,\n        })\n    }\n\n    get keys() {\n        return this.accountKey.keys\n    }\n\n    get accountKeyType() {\n        return this.accountKey.type\n    }\n\n    get transactionKey() {\n        return this.accountKey.transactionKey\n    }\n\n    get updateKey() {\n        return this.accountKey.updateKey\n    }\n\n    get feePayerKey() {\n        return this.accountKey.feePayerKey\n    }\n\n    toPublicKey(toPublicKeyFunc) {\n        return this.accountKey.toPublicKey(toPublicKeyFunc)\n    }\n}\n\nmodule.exports = Account\n"]},"metadata":{},"sourceType":"script"}