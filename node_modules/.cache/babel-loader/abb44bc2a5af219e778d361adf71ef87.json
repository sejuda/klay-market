{"ast":null,"code":"'use strict';\n\nconst {\n  objectToQuery\n} = require('../lib/querystring');\n\nconst configure = require('../lib/configure');\n\nconst {\n  ok\n} = require('../lib/fetch');\n\nconst toCamel = require('../lib/to-camel');\n\nmodule.exports = configure(({\n  fetch,\n  apiUrl,\n  apiPath,\n  headers\n}) => {\n  return async options => {\n    options = options || {};\n    const qs = objectToQuery({\n      verbose: options.verbose,\n      streams: options.streams,\n      latency: options.latency,\n      ...(options.qs || {})\n    });\n    const url = `${apiUrl}${apiPath}/swarm/peers${qs}`;\n    const res = await ok(fetch(url, {\n      signal: options.signal,\n      headers: options.headers || headers\n    }));\n    const data = await res.json();\n    return (data.Peers || []).map(p => {\n      const peerInfo = toCamel(p);\n\n      if (peerInfo.streams) {\n        peerInfo.streams = peerInfo.streams.map(toCamel);\n      }\n\n      return peerInfo;\n    });\n  };\n});","map":{"version":3,"sources":["/Users/mac/Desktop/klay-market/node_modules/ipfs-http-client-lite/src/swarm/peers.js"],"names":["objectToQuery","require","configure","ok","toCamel","module","exports","fetch","apiUrl","apiPath","headers","options","qs","verbose","streams","latency","url","res","signal","data","json","Peers","map","p","peerInfo"],"mappings":"AAAA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAoBC,OAAO,CAAC,oBAAD,CAAjC;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,kBAAD,CAAzB;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAASF,OAAO,CAAC,cAAD,CAAtB;;AACA,MAAMG,OAAO,GAAGH,OAAO,CAAC,iBAAD,CAAvB;;AAEAI,MAAM,CAACC,OAAP,GAAiBJ,SAAS,CAAC,CAAC;AAAEK,EAAAA,KAAF;AAASC,EAAAA,MAAT;AAAiBC,EAAAA,OAAjB;AAA0BC,EAAAA;AAA1B,CAAD,KAAyC;AAClE,SAAO,MAAMC,OAAN,IAAiB;AACtBA,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,UAAMC,EAAE,GAAGZ,aAAa,CAAC;AACvBa,MAAAA,OAAO,EAAEF,OAAO,CAACE,OADM;AAEvBC,MAAAA,OAAO,EAAEH,OAAO,CAACG,OAFM;AAGvBC,MAAAA,OAAO,EAAEJ,OAAO,CAACI,OAHM;AAIvB,UAAIJ,OAAO,CAACC,EAAR,IAAc,EAAlB;AAJuB,KAAD,CAAxB;AAOA,UAAMI,GAAG,GAAI,GAAER,MAAO,GAAEC,OAAQ,eAAcG,EAAG,EAAjD;AACA,UAAMK,GAAG,GAAG,MAAMd,EAAE,CAACI,KAAK,CAACS,GAAD,EAAM;AAC9BE,MAAAA,MAAM,EAAEP,OAAO,CAACO,MADc;AAE9BR,MAAAA,OAAO,EAAEC,OAAO,CAACD,OAAR,IAAmBA;AAFE,KAAN,CAAN,CAApB;AAIA,UAAMS,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AAEA,WAAO,CAACD,IAAI,CAACE,KAAL,IAAc,EAAf,EAAmBC,GAAnB,CAAuBC,CAAC,IAAI;AACjC,YAAMC,QAAQ,GAAGpB,OAAO,CAACmB,CAAD,CAAxB;;AAEA,UAAIC,QAAQ,CAACV,OAAb,EAAsB;AACpBU,QAAAA,QAAQ,CAACV,OAAT,GAAmBU,QAAQ,CAACV,OAAT,CAAiBQ,GAAjB,CAAqBlB,OAArB,CAAnB;AACD;;AAED,aAAOoB,QAAP;AACD,KARM,CAAP;AASD,GA1BD;AA2BD,CA5ByB,CAA1B","sourcesContent":["'use strict'\n\nconst { objectToQuery } = require('../lib/querystring')\nconst configure = require('../lib/configure')\nconst { ok } = require('../lib/fetch')\nconst toCamel = require('../lib/to-camel')\n\nmodule.exports = configure(({ fetch, apiUrl, apiPath, headers }) => {\n  return async options => {\n    options = options || {}\n\n    const qs = objectToQuery({\n      verbose: options.verbose,\n      streams: options.streams,\n      latency: options.latency,\n      ...(options.qs || {})\n    })\n\n    const url = `${apiUrl}${apiPath}/swarm/peers${qs}`\n    const res = await ok(fetch(url, {\n      signal: options.signal,\n      headers: options.headers || headers\n    }))\n    const data = await res.json()\n\n    return (data.Peers || []).map(p => {\n      const peerInfo = toCamel(p)\n\n      if (peerInfo.streams) {\n        peerInfo.streams = peerInfo.streams.map(toCamel)\n      }\n\n      return peerInfo\n    })\n  }\n})\n"]},"metadata":{},"sourceType":"script"}